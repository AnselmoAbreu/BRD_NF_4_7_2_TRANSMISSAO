@{
    ViewData["Title"] = "Enviar Arquivo";
}

<div class="container mt-5">
    <h2 class="text-center mb-4">Enviar Arquivo</h2>

    <form asp-action="EnviarArquivo" method="post" enctype="multipart/form-data" class="card p-4 shadow">
        <div class="mb-3">
            <label for="arquivo" class="form-label">Escolha um arquivo:</label>
            <input type="file" class="form-control" name="arquivo" id="arquivo" />
        </div>

        <div class="mb-3">
            <label for="descricao" class="form-label">Tipo de Arquivo:</label>
            <input type="text" class="form-control" name="descricao" id="descricao" value="COB400" />
        </div>

        <div class="d-grid">
            <button type="submit" class="btn btn-primary btn-lg">Enviar Arquivo</button>
        </div>
    </form>

    @if (ViewBag.Mensagem != null)
    {
        var mensagem = Newtonsoft.Json.JsonConvert.DeserializeObject<dynamic>(ViewBag.Mensagem);

        <div class="alert alert-info mt-4" role="alert">
            @if (mensagem.erro != null)
            {
                <p>@Html.Raw(mensagem.erro.ToString())</p>
            }
            else if (mensagem.erros != null)
            {
                <ul>
                    @foreach (var erro in mensagem.erros)
                    {
                        <li>@Html.Raw(erro.ToString())</li>
                    }
                </ul>
            }
            else
            {
                <p>@Html.Raw(ViewBag.Mensagem)</p>
            }
        </div>
    }
</div>
